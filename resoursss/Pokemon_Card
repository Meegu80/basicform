// React + TypeScript
// 원래 파일명 App.tsx

// 리액트 훅 useState, useEffect를 import
import { useEffect, useState } from "react";
// react-router의 Link 컴포넌트를 import (페이지 이동에 사용)
import { Link } from "react-router";
// styled-components 패키지를 이용해 스타일이 적용된 컴포넌트를 작성
import styled from "styled-components";

// 포켓몬 하나의 데이터 구조 정의 (이 타입이 리스트에 사용됨)
export type Pokemon = {
    name: string; // 포켓몬 이름
    url: string;  // 포켓몬 상세 API 주소
};

// PokeAPI에서 한 번에 받아오는 포켓몬 리스트의 전체 응답 구조 타입 정의
type PokemonApiResponse = {
    count: number;         // 전체 포켓몬 개수
    next: string | null;   // 다음 페이지 URL
    previous: string | null; // 이전 페이지 URL
    results: Pokemon[];    // 실제 포켓몬 데이터 배열
};

// 전체 컴포넌트를 감싸는 컨테이너 스타일 정의
const Container = styled.div`
    max-width: 1200px;
    margin: 0 auto;          // 가운데 정렬
    padding: 40px 24px;      // 내부 여백
`;

// 제목 스타일 정의
const Title = styled.h2`
    margin: 0 0 32px 0;
    font-size: 35px;
    font-weight: 600;
    color: #2c3e50;
    text-align: center;
`;

// 로딩 상태일 때 중앙에 표시될 영역 스타일
const LoadingWrapper = styled.div`
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 400px;
    font-size: 18px;
    color: #7f8c8d;
`;

// 포켓몬 리스트를 격자(grid) 형태로 보여줄 영역 스타일
// 여기서부터 PokemonName까지 카드형태 CSS가 됨
const PokemonGrid = styled.ul`
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); // 최소 150px, 자동 채움
    gap: 24px;           // 카드 간격
    list-style: none;    // 기본 리스트 점 제거
    padding: 0;
    margin: 0;
`;

// 포켓몬 하나를 담는 카드 스타일
const PokemonCard = styled.li`
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    transition: transform 0.2s, box-shadow 0.2s;
    overflow: hidden;

    // 마우스를 올렸을 때 약간 떠오르는 효과
    &:hover {
        transform: translateY(-4px);
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
    }
`;

// 각 포켓몬 카드를 클릭 가능하게 만드는 링크 스타일
const PokemonLink = styled(Link)`
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    text-decoration: none;  // 링크 밑줄 제거
    color: inherit;         // 상위 색상 상속
`;

// 포켓몬 이미지 스타일
const PokemonImage = styled.img`
    width: 96px;
    height: 96px;
    object-fit: contain; // 비율 유지하면서 맞춤
`;

// 포켓몬 이름 텍스트 스타일
const PokemonName = styled.p`
    margin: 12px 0 0 0;
    font-size: 16px;
    font-weight: 500;
    color: #2c3e50;
    text-transform: capitalize; // 첫 글자 대문자 처리
    text-align: center;
`;

// --------------------------
// 메인 컴포넌트: Home
// --------------------------
function Home() {
    // 로딩 상태 관리 (true = 로딩 중)
    const [loading, setLoading] = useState<boolean>(true);

    // 포켓몬 리스트 데이터 상태 관리
    const [list, setList] = useState<Pokemon[]>([]);

    // 컴포넌트가 처음 렌더링될 때 한 번만 실행됨
    useEffect(() => {
        // PokeAPI에서 포켓몬 데이터 50개를 요청
        fetch("https://pokeapi.co/api/v2/pokemon?limit=50")
            .then(res => res.json())        // 응답 본문(json)을 파싱
            .then((data: PokemonApiResponse) => {
                // 받아온 포켓몬 데이터를 상태에 저장
                setList(data.results);
                // 로딩 완료 표시
                setLoading(false);
            });
    }, []); // 의존성 배열이 비어 있으므로 최초 1회만 실행됨

    // JSX 반환 (렌더링)
    return (
        <Container>
            <Title>Pokemon List</Title>
            {loading ? (
                // 로딩 중일 때 화면
                <LoadingWrapper>Loading...</LoadingWrapper>
            ) : (
                // 로딩이 끝난 뒤 포켓몬 리스트 표시
                <PokemonGrid>
                    {list.map((item, index) => {
                        // 포켓몬 번호 (PokeAPI 데이터는 URL에 번호가 있지만 여기서는 index+1 사용)
                        const pokemonNumber = index + 1;

                        return (
                            <PokemonCard key={index}>
                                {/* 포켓몬 상세 페이지로 이동하는 링크 */}
                                <PokemonLink to={`/detail/${pokemonNumber}`}>
                                    {/* 포켓몬 스프라이트 이미지 표시 */}
                                    <PokemonImage
                                        src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemonNumber}.png`}
                                        alt={item.name}
                                    />
                                    {/* 포켓몬 이름 출력 */}
                                    <PokemonName>{item.name}</PokemonName>
                                </PokemonLink>
                            </PokemonCard>
                        );
                    })}
                </PokemonGrid>
            )}
        </Container>
    );
}

// 컴포넌트를 외부에서 사용할 수 있도록 export
export default Home;




=======================================================================
여기서 쓰인 카드형 CSS
// 포켓몬 리스트를 격자(grid) 형태로 보여줄 영역 스타일
// 여기서부터 PokemonName까지 카드형태 CSS가 됨

const PokemonGrid = styled.ul`
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); // 최소 150px, 자동 채움
    gap: 24px;           // 카드 간격
    list-style: none;    // 기본 리스트 점 제거
    padding: 0;
    margin: 0;
`;

// 포켓몬 하나를 담는 카드 스타일
const PokemonCard = styled.li`
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    transition: transform 0.2s, box-shadow 0.2s;
    overflow: hidden;

    // 마우스를 올렸을 때 약간 떠오르는 효과
    &:hover {
        transform: translateY(-4px);
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
    }
`;

// 각 포켓몬 카드를 클릭 가능하게 만드는 링크 스타일
const PokemonLink = styled(Link)`
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    text-decoration: none;  // 링크 밑줄 제거
    color: inherit;         // 상위 색상 상속
`;

// 포켓몬 이미지 스타일
const PokemonImage = styled.img`
    width: 96px;
    height: 96px;
    object-fit: contain; // 비율 유지하면서 맞춤
`;

// 포켓몬 이름 텍스트 스타일
const PokemonName = styled.p`
    margin: 12px 0 0 0;
    font-size: 16px;
    font-weight: 500;
    color: #2c3e50;
    text-transform: capitalize; // 첫 글자 대문자 처리
    text-align: center;
`;
